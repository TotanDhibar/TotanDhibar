<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %> - <%= contactInfo ? contactInfo.company_name : 'UCC Engineering' %></title>
    <% if (page && page.meta_description) { %>
    <meta name="description" content="<%= page.meta_description %>">
    <% } %>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <%- include('../partials/header', { contactInfo }) %>
    
    <main>
        <!-- Hero Section with Background Image Slideshow -->
        <section class="hero hero-slideshow">
            <!-- Background Slideshow -->
            <div class="hero-slides">
                <%
                // Get hero backgrounds - support multiple images separated by |
                let heroBackgrounds = [];
                if (homeConfig && homeConfig.hero_background) {
                    heroBackgrounds = homeConfig.hero_background.split('|').filter(bg => bg.trim());
                }
                if (heroBackgrounds.length === 0 && contactInfo && contactInfo.background_image) {
                    heroBackgrounds.push(contactInfo.background_image);
                }
                // Default placeholder backgrounds if none configured
                if (heroBackgrounds.length === 0) {
                    heroBackgrounds = ['/uploads/hero-slide-1.jpg', '/uploads/hero-slide-2.jpg', '/uploads/hero-slide-3.jpg'];
                }
                %>
                <% heroBackgrounds.forEach(function(bg, index) { %>
                <div class="hero-slide<%= index === 0 ? ' active' : '' %>" style="background-image: url('<%= bg.trim() %>');" data-slide="<%= index %>"></div>
                <% }); %>
                <div class="hero-overlay"></div>
            </div>
            
            <!-- Slideshow Navigation Dots -->
            <% if (heroBackgrounds.length > 1) { %>
            <div class="hero-dots">
                <% heroBackgrounds.forEach(function(bg, index) { %>
                <button class="hero-dot<%= index === 0 ? ' active' : '' %>" data-slide="<%= index %>" aria-label="Go to slide <%= index + 1 %>"></button>
                <% }); %>
            </div>
            <% } %>
            
            <div class="container hero-content">
                <h1 class="hero-title animate-fade-in">
                    <%= (homeConfig && homeConfig.hero_title) ? homeConfig.hero_title : (contactInfo ? contactInfo.company_name : 'UCC Engineering Contractors') %>
                </h1>
                
                <!-- Animated Text -->
                <% if (homeConfig && homeConfig.animated_text) { %>
                <div class="animated-text-wrapper">
                    <span class="animated-text" data-texts="<%= homeConfig.animated_text %>"></span>
                </div>
                <% } else { %>
                <p class="hero-subtitle animate-slide-up">
                    <%= (homeConfig && homeConfig.hero_subtitle) ? homeConfig.hero_subtitle : 'Excellence in Power Plant Maintenance & Engineering' %>
                </p>
                <% } %>
                
                <div class="hero-buttons animate-fade-in" style="animation-delay: 0.5s">
                    <a href="/services" class="btn btn-primary">Our Services</a>
                    <a href="/contact" class="btn btn-secondary">Contact Us</a>
                </div>
            </div>
        </section>

        <!-- Statistics Section -->
        <% if (homeConfig) { %>
        <section class="stats-section">
            <div class="container">
                <div class="stats-grid">
                    <div class="stat-item animate-count">
                        <span class="stat-number" data-count="<%= homeConfig.stat1_value || 500 %>">0</span>+
                        <span class="stat-label"><%= homeConfig.stat1_label || 'Projects Completed' %></span>
                    </div>
                    <div class="stat-item animate-count">
                        <span class="stat-number" data-count="<%= homeConfig.stat2_value || 50 %>">0</span>+
                        <span class="stat-label"><%= homeConfig.stat2_label || 'Happy Clients' %></span>
                    </div>
                    <div class="stat-item animate-count">
                        <span class="stat-number" data-count="<%= homeConfig.stat3_value || 15 %>">0</span>+
                        <span class="stat-label"><%= homeConfig.stat3_label || 'Years Experience' %></span>
                    </div>
                    <div class="stat-item animate-count">
                        <span class="stat-number" data-count="<%= homeConfig.stat4_value || 100 %>">0</span>+
                        <span class="stat-label"><%= homeConfig.stat4_label || 'Team Members' %></span>
                    </div>
                </div>
            </div>
        </section>
        <% } %>

        <!-- Content Section -->
        <% if (page) { %>
        <section class="content-section">
            <div class="container">
                <div class="content-wrapper animate-slide-up">
                    <%- page.content %>
                </div>
            </div>
        </section>
        <% } %>

        <!-- Services Preview -->
        <% if (services && services.length > 0) { %>
        <section class="services-preview">
            <div class="container">
                <h2 class="section-title">Our Core Services</h2>
                <div class="services-grid">
                    <% services.forEach(function(service, index) { %>
                    <a href="/services/<%= service.slug %>" class="service-card animate-fade-in" style="animation-delay: <%= index * 0.1 %>s">
                        <div class="service-icon">
                            <% if (service.icon === 'wrench') { %>üîß<% } 
                               else if (service.icon === 'fire') { %>üî•<% } 
                               else if (service.icon === 'wind') { %>üí®<% } 
                               else if (service.icon === 'thermometer') { %>üå°Ô∏è<% } 
                               else if (service.icon === 'bolt') { %>‚ö°<% } 
                               else if (service.icon === 'anchor') { %>‚öì<% } 
                               else if (service.icon === 'pause') { %>‚è∏Ô∏è<% } 
                               else if (service.icon === 'gear') { %>‚öôÔ∏è<% } 
                               else { %>üîß<% } %>
                        </div>
                        <h3><%= service.name %></h3>
                        <p><%= service.description %></p>
                        <span class="learn-more">Learn More ‚Üí</span>
                    </a>
                    <% }); %>
                </div>
                <div class="text-center" style="margin-top: 2rem;">
                    <a href="/services" class="btn btn-primary">View All Services</a>
                </div>
            </div>
        </section>
        <% } %>

        <!-- Best Works / Projects Section -->
        <% if (projects && projects.length > 0) { %>
        <section class="best-works-section">
            <div class="container">
                <h2 class="section-title">Our Best Works</h2>
                <div class="works-grid">
                    <% projects.slice(0, 6).forEach(function(project, index) { %>
                    <div class="work-card animate-fade-in" style="animation-delay: <%= index * 0.1 %>s">
                        <% if (project.image) { %>
                        <div class="work-image">
                            <img src="<%= project.image %>" alt="<%= project.title %>" loading="lazy">
                            <div class="work-overlay">
                                <h4><%= project.title %></h4>
                                <% if (project.category) { %>
                                <span class="category-badge"><%= project.category %></span>
                                <% } %>
                            </div>
                        </div>
                        <% } else { %>
                        <div class="work-placeholder">
                            <h4><%= project.title %></h4>
                            <% if (project.description) { %>
                            <p><%= project.description.substring(0, 80) %>...</p>
                            <% } %>
                        </div>
                        <% } %>
                    </div>
                    <% }); %>
                </div>
                <div class="text-center" style="margin-top: 2rem;">
                    <a href="/projects" class="btn btn-primary">View All Projects</a>
                </div>
            </div>
        </section>
        <% } %>

        <!-- Clients Section -->
        <% if (clients && clients.length > 0) { %>
        <section class="clients-section">
            <div class="container">
                <h2 class="section-title">Our Trusted Clients</h2>
                <div class="clients-grid">
                    <% clients.forEach(function(client, index) { %>
                    <a href="/clients/<%= client.slug %>" class="client-card animate-fade-in" style="animation-delay: <%= index * 0.1 %>s">
                        <% if (client.logo) { %>
                        <img src="<%= client.logo %>" alt="<%= client.name %>">
                        <% } else { %>
                        <div class="client-initial"><%= client.name.charAt(0) %></div>
                        <% } %>
                        <h4><%= client.name %></h4>
                    </a>
                    <% }); %>
                </div>
                <div class="text-center" style="margin-top: 2rem;">
                    <a href="/clients" class="btn btn-secondary">View All Clients</a>
                </div>
            </div>
        </section>
        <% } %>

        <!-- CTA Section -->
        <section class="cta-section">
            <div class="container">
                <h2>Ready to Work With Us?</h2>
                <p>Contact us today for professional engineering solutions</p>
                <a href="/contact" class="btn btn-light">Get in Touch</a>
            </div>
        </section>
    </main>
    
    <%- include('../partials/footer', { contactInfo }) %>
    
    <script src="/js/main.js"></script>
</body>
</html>
