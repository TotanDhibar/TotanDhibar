<%- include('layout', {
    title: title,
    body: `
    <!-- EDIT HERE: Alerts Section -->
    ${success ? '<div class="alert alert-success alert-dismissible"><button type="button" class="close" data-dismiss="alert">&times;</button><i class="icon fas fa-check"></i> Contact information updated successfully!</div>' : ''}
    ${errors && errors.length > 0 ? '<div class="alert alert-danger alert-dismissible"><button type="button" class="close" data-dismiss="alert">&times;</button><i class="icon fas fa-ban"></i><ul class="mb-0">' + errors.map(e => '<li>' + e.msg + '</li>').join('') + '</ul></div>' : ''}
    
    <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="uploadType" value="images">
        
        <div class="row">
            <!-- EDIT HERE: Company Information Card -->
            <div class="col-md-6">
                <div class="card card-primary">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fas fa-building mr-1"></i> Company Information</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label for="company_name"><i class="fas fa-tag mr-1"></i> Company Name <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="company_name" name="company_name" value="${contactInfo ? contactInfo.company_name : ''}" required>
                        </div>
                        
                        <div class="form-group">
                            <label><i class="fas fa-image mr-1"></i> Company Logo</label>
                            ${contactInfo && contactInfo.company_logo ? '<div class="mb-2"><img src="' + contactInfo.company_logo + '" alt="Company Logo" class="img-thumbnail" style="max-width: 200px; max-height: 100px; background: #f8f9fa;"></div>' : ''}
                            <div class="custom-file">
                                <input type="file" class="custom-file-input" id="company_logo" name="company_logo" accept="image/*">
                                <label class="custom-file-label" for="company_logo">Choose logo file</label>
                            </div>
                            <small class="text-muted">Recommended: PNG with transparent background</small>
                        </div>
                        
                        <div class="form-group">
                            <label><i class="fas fa-image mr-1"></i> Background Image</label>
                            ${contactInfo && contactInfo.background_image ? '<div class="mb-2"><img src="' + contactInfo.background_image + '" alt="Background" class="img-thumbnail" style="max-width: 300px; max-height: 150px;"></div>' : ''}
                            <div class="custom-file">
                                <input type="file" class="custom-file-input" id="background_image" name="background_image" accept="image/*">
                                <label class="custom-file-label" for="background_image">Choose background file</label>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="gst_number"><i class="fas fa-file-invoice mr-1"></i> GST Number</label>
                            <input type="text" class="form-control" id="gst_number" name="gst_number" value="${contactInfo ? (contactInfo.gst_number || '') : ''}" placeholder="e.g., 22AAAAA0000A1Z5">
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- EDIT HERE: Contact Details Card -->
            <div class="col-md-6">
                <div class="card card-success">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fas fa-address-card mr-1"></i> Contact Details</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label for="phone"><i class="fas fa-phone mr-1"></i> Phone</label>
                            <input type="text" class="form-control" id="phone" name="phone" value="${contactInfo ? (contactInfo.phone || '') : ''}" placeholder="+91-XXXXXXXXXX">
                        </div>
                        
                        <div class="form-group">
                            <label for="email"><i class="fas fa-envelope mr-1"></i> Email</label>
                            <input type="email" class="form-control" id="email" name="email" value="${contactInfo ? (contactInfo.email || '') : ''}" placeholder="contact@example.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="address"><i class="fas fa-map-marker-alt mr-1"></i> Address</label>
                            <textarea class="form-control" id="address" name="address" rows="3" placeholder="Street address, building name, etc.">${contactInfo ? (contactInfo.address || '') : ''}</textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="location"><i class="fas fa-globe mr-1"></i> Location (City, State, Country)</label>
                            <input type="text" class="form-control" id="location" name="location" value="${contactInfo ? (contactInfo.location || '') : ''}" placeholder="e.g., Asansol, West Bengal, India">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- EDIT HERE: Google Maps Card -->
        <div class="row">
            <div class="col-12">
                <div class="card card-info">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fas fa-map mr-1"></i> Google Maps Integration</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="form-group">
                                    <label for="google_map_embed"><i class="fas fa-code mr-1"></i> Google Map Embed Code</label>
                                    <textarea class="form-control" id="google_map_embed" name="google_map_embed" rows="4" placeholder="Paste your Google Maps iframe embed code here">${contactInfo ? (contactInfo.google_map_embed || '') : ''}</textarea>
                                    <small class="text-muted">Go to Google Maps ‚Üí Share ‚Üí Embed a map ‚Üí Copy the HTML iframe code</small>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="callout callout-info">
                                    <h5>üìç Alternative: GPS Coordinates</h5>
                                    <p class="text-muted small">If you don't have an embed code, enter coordinates below.</p>
                                </div>
                                <div class="form-group">
                                    <label for="gps_latitude"><i class="fas fa-map-pin mr-1"></i> Latitude</label>
                                    <input type="number" step="any" class="form-control" id="gps_latitude" name="gps_latitude" value="${contactInfo && contactInfo.gps_latitude ? contactInfo.gps_latitude : ''}" placeholder="e.g., 23.6850" min="-90" max="90">
                                </div>
                                <div class="form-group">
                                    <label for="gps_longitude"><i class="fas fa-map-pin mr-1"></i> Longitude</label>
                                    <input type="number" step="any" class="form-control" id="gps_longitude" name="gps_longitude" value="${contactInfo && contactInfo.gps_longitude ? contactInfo.gps_longitude : ''}" placeholder="e.g., 86.9617" min="-180" max="180">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save mr-1"></i> Save Changes
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </form>
    `,
    extraScripts: `
    <script>
        // EDIT HERE: Custom file input label update
        document.querySelectorAll('.custom-file-input').forEach(function(input) {
            input.addEventListener('change', function(e) {
                var fileName = e.target.files[0] ? e.target.files[0].name : 'Choose file';
                e.target.nextElementSibling.textContent = fileName;
            });
        });
    </script>
    `
}) %>
