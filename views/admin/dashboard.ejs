<%- include('layout', {
    title: title,
    body: `
    <!-- EDIT HERE: Dashboard Statistics Cards -->
    <div class="row">
        <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-info">
                <div class="inner">
                    <h3>${stats.services}</h3>
                    <p>Services</p>
                </div>
                <div class="icon">
                    <i class="fas fa-cogs"></i>
                </div>
                <a href="/admin/services" class="small-box-footer">Manage Services <i class="fas fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-success">
                <div class="inner">
                    <h3>${stats.clients}</h3>
                    <p>Clients</p>
                </div>
                <div class="icon">
                    <i class="fas fa-building"></i>
                </div>
                <a href="/admin/clients" class="small-box-footer">Manage Clients <i class="fas fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-warning">
                <div class="inner">
                    <h3>${stats.projects}</h3>
                    <p>Projects</p>
                </div>
                <div class="icon">
                    <i class="fas fa-images"></i>
                </div>
                <a href="/admin/projects" class="small-box-footer">Manage Projects <i class="fas fa-arrow-circle-right"></i></a>
            </div>
        </div>
        <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-danger">
                <div class="inner">
                    <h3>${stats.submissions}</h3>
                    <p>Unread Messages</p>
                </div>
                <div class="icon">
                    <i class="fas fa-envelope"></i>
                </div>
                <a href="/admin/submissions" class="small-box-footer">View Messages <i class="fas fa-arrow-circle-right"></i></a>
            </div>
        </div>
    </div>
    
    <!-- System Statistics Row -->
    <div class="row">
        <div class="col-lg-3 col-6">
            <div class="info-box bg-gradient-info hover-lift">
                <span class="info-box-icon"><i class="fas fa-clock"></i></span>
                <div class="info-box-content">
                    <span class="info-box-text">Last Login</span>
                    <span class="info-box-number">${new Date().toLocaleDateString()}</span>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-6">
            <div class="info-box bg-gradient-success hover-lift">
                <span class="info-box-icon"><i class="fas fa-users"></i></span>
                <div class="info-box-content">
                    <span class="info-box-text">Team Members</span>
                    <span class="info-box-number">${stats.team || 0}</span>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-6">
            <div class="info-box bg-gradient-warning hover-lift">
                <span class="info-box-icon"><i class="fas fa-certificate"></i></span>
                <div class="info-box-content">
                    <span class="info-box-text">Certificates</span>
                    <span class="info-box-number">${stats.certificates}</span>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-6">
            <div class="info-box bg-gradient-danger hover-lift">
                <span class="info-box-icon"><i class="fas fa-download"></i></span>
                <div class="info-box-content">
                    <span class="info-box-text">Downloads</span>
                    <span class="info-box-number">${stats.downloads || 0}</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row">
        <!-- EDIT HERE: Chart Section -->
        <div class="col-lg-6">
            <div class="card hover-lift">
                <div class="card-header border-0 bg-gradient-primary text-white">
                    <div class="d-flex justify-content-between align-items-center">
                        <h3 class="card-title mb-0"><i class="fas fa-chart-pie mr-2"></i> Content Overview</h3>
                        <div class="card-tools">
                            <button type="button" class="btn btn-tool text-white" data-card-widget="collapse">
                                <i class="fas fa-minus"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <canvas id="contentChart" style="height: 300px;"></canvas>
                </div>
            </div>
        </div>
        
        <!-- EDIT HERE: Quick Actions -->
        <div class="col-lg-6">
            <div class="card hover-lift">
                <div class="card-header bg-gradient-success text-white">
                    <h3 class="card-title mb-0"><i class="fas fa-bolt mr-2"></i> Quick Actions</h3>
                </div>
                <div class="card-body">
                    <div class="actions-grid">
                        <a href="/admin/services/add" class="action-card" style="background: var(--gradient-primary);">
                            <i class="fas fa-plus-circle"></i>
                            <h3>Add Service</h3>
                        </a>
                        <a href="/admin/clients/add" class="action-card" style="background: var(--gradient-success);">
                            <i class="fas fa-building"></i>
                            <h3>Add Client</h3>
                        </a>
                        <a href="/admin/projects/add" class="action-card" style="background: var(--gradient-warning);">
                            <i class="fas fa-images"></i>
                            <h3>Add Project</h3>
                        </a>
                        <a href="/admin/team/add" class="action-card" style="background: var(--gradient-info);">
                            <i class="fas fa-user-plus"></i>
                            <h3>Add Team</h3>
                        </a>
                        <a href="/admin/home-config" class="action-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <i class="fas fa-home"></i>
                            <h3>Edit Home</h3>
                        </a>
                        <a href="/admin/contact-info" class="action-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                            <i class="fas fa-info-circle"></i>
                            <h3>Company Info</h3>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Activity Timeline -->
    <div class="row">
        <div class="col-lg-6">
            <div class="card hover-lift">
                <div class="card-header bg-gradient-warning text-white">
                    <h3 class="card-title mb-0"><i class="fas fa-history mr-2"></i> Recent Activity</h3>
                </div>
                <div class="card-body">
                    <div class="timeline">
                        <div class="timeline-item">
                            <div class="timeline-content">
                                <h4 style="font-size: 1rem; font-weight: 600; margin-bottom: 0.5rem;">Website Launched</h4>
                                <p style="margin: 0; color: #64748b; font-size: 0.875rem;">CMS system successfully deployed</p>
                                <small style="color: #94a3b8;">${new Date().toLocaleDateString()}</small>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-content">
                                <h4 style="font-size: 1rem; font-weight: 600; margin-bottom: 0.5rem;">Content Added</h4>
                                <p style="margin: 0; color: #64748b; font-size: 0.875rem;">${stats.services} services and ${stats.clients} clients configured</p>
                                <small style="color: #94a3b8;">${new Date().toLocaleDateString()}</small>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-content">
                                <h4 style="font-size: 1rem; font-weight: 600; margin-bottom: 0.5rem;">Admin Panel Ready</h4>
                                <p style="margin: 0; color: #64748b; font-size: 0.875rem;">All features are operational</p>
                                <small style="color: #94a3b8;">${new Date().toLocaleDateString()}</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-6">
            <div class="card hover-lift">
                <div class="card-header bg-gradient-info text-white">
                    <h3 class="card-title mb-0"><i class="fas fa-chart-line mr-2"></i> System Status</h3>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between mb-2">
                            <span style="font-weight: 600;">Content Completion</span>
                            <span style="font-weight: 700; color: #6366f1;">85%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 85%;"></div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between mb-2">
                            <span style="font-weight: 600;">Services Setup</span>
                            <span style="font-weight: 700; color: #10b981;">100%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 100%; background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);"></div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between mb-2">
                            <span style="font-weight: 600;">Client Portfolio</span>
                            <span style="font-weight: 700; color: #f59e0b;">75%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 75%; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);"></div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between mb-2">
                            <span style="font-weight: 600;">Project Gallery</span>
                            <span style="font-weight: 700; color: #3b82f6;">60%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 60%; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- EDIT HERE: Recent Submissions Table -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title"><i class="fas fa-envelope mr-1"></i> Recent Contact Submissions</h3>
                    <div class="card-tools">
                        <a href="/admin/submissions" class="btn btn-tool btn-sm">
                            <i class="fas fa-external-link-alt"></i> View All
                        </a>
                    </div>
                </div>
                <div class="card-body table-responsive p-0">
                    <table class="table table-hover text-nowrap">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Subject</th>
                                <th>Date</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
` + (recentSubmissions && recentSubmissions.length > 0 ? recentSubmissions.map(sub => `
                            <tr>
                                <td>${sub.name}</td>
                                <td>${sub.email}</td>
                                <td>${sub.subject || 'No Subject'}</td>
                                <td>${new Date(sub.submitted_at).toLocaleDateString()}</td>
                                <td>
                                    ${sub.is_read ? '<span class="badge badge-success">Read</span>' : '<span class="badge badge-warning">Unread</span>'}
                                </td>
                            </tr>
`).join('') : '<tr><td colspan="5" class="text-center text-muted">No submissions yet</td></tr>') + `
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    `,
    extraScripts: `
    <!-- Dashboard Enhanced Scripts -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Content Overview Chart with modern styling
            var ctx = document.getElementById('contentChart');
            if (ctx) {
                new Chart(ctx.getContext('2d'), {
                    type: 'doughnut',
                    data: {
                        labels: ['Services', 'Clients', 'Projects', 'Certificates'],
                        datasets: [{
                            data: [${stats.services}, ${stats.clients}, ${stats.projects}, ${stats.certificates}],
                            backgroundColor: [
                                'rgba(99, 102, 241, 0.8)',
                                'rgba(16, 185, 129, 0.8)',
                                'rgba(245, 158, 11, 0.8)',
                                'rgba(239, 68, 68, 0.8)'
                            ],
                            borderColor: [
                                'rgba(99, 102, 241, 1)',
                                'rgba(16, 185, 129, 1)',
                                'rgba(245, 158, 11, 1)',
                                'rgba(239, 68, 68, 1)'
                            ],
                            borderWidth: 3,
                            hoverOffset: 15
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 20,
                                    font: {
                                        size: 13,
                                        weight: '500'
                                    },
                                    usePointStyle: true,
                                    pointStyle: 'circle'
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                padding: 12,
                                cornerRadius: 8,
                                titleFont: {
                                    size: 14,
                                    weight: 'bold'
                                },
                                bodyFont: {
                                    size: 13
                                },
                                callbacks: {
                                    label: function(context) {
                                        let label = context.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        label += context.parsed;
                                        return label + ' items';
                                    }
                                }
                            }
                        },
                        animation: {
                            animateRotate: true,
                            animateScale: true,
                            duration: 2000,
                            easing: 'easeInOutQuart'
                        }
                    }
                });
            }
            
            // Add welcome toast notification
            setTimeout(function() {
                if (window.toast) {
                    window.toast.show('Welcome back to UCC Engineering CMS!', 'success');
                }
            }, 500);
        });
    </script>
    `
}) %>
