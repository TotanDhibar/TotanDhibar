<%- include('layout', {
    title: title,
    body: `
    <!-- EDIT HERE: Page Header with Add Button -->
    <div class="row mb-3">
        <div class="col-12">
            <a href="/admin/services/add" class="btn btn-primary">
                <i class="fas fa-plus mr-1"></i> Add New Service
            </a>
        </div>
    </div>
    
    <!-- EDIT HERE: Services Table Card -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-title"><i class="fas fa-cogs mr-1"></i> All Services</h3>
            <div class="card-tools">
                <div class="input-group input-group-sm" style="width: 200px;">
                    <input type="text" name="table_search" class="form-control float-right" placeholder="Search" id="serviceSearch">
                    <div class="input-group-append">
                        <button type="button" class="btn btn-default">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-body table-responsive p-0">
            <table class="table table-hover text-nowrap" id="servicesTable">
                <thead>
                    <tr>
                        <th style="width: 60px">#</th>
                        <th>Service Name</th>
                        <th>Description</th>
                        <th style="width: 80px">Order</th>
                        <th style="width: 150px">Actions</th>
                    </tr>
                </thead>
                <tbody>
` + (services && services.length > 0 ? services.map((service, index) => `
                    <tr>
                        <td>${index + 1}</td>
                        <td>
                            <strong>${service.name}</strong>
                            ${service.image ? '<br><small class="text-muted"><i class="fas fa-image"></i> Has image</small>' : ''}
                        </td>
                        <td>${service.description ? (service.description.length > 60 ? service.description.substring(0, 60) + '...' : service.description) : '<span class="text-muted">No description</span>'}</td>
                        <td><span class="badge badge-info">${service.order_index}</span></td>
                        <td>
                            <div class="btn-group">
                                <a href="/admin/services/edit/${service.id}" class="btn btn-sm btn-info" title="Edit">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <a href="/services/${service.slug}" class="btn btn-sm btn-secondary" title="View" target="_blank">
                                    <i class="fas fa-eye"></i>
                                </a>
                                <form method="POST" action="/admin/services/delete/${service.id}" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this service?');">
                                    <button type="submit" class="btn btn-sm btn-danger" title="Delete">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </form>
                            </div>
                        </td>
                    </tr>
`).join('') : '<tr><td colspan="5" class="text-center text-muted p-4">No services found. <a href="/admin/services/add">Add your first service</a></td></tr>') + `
                </tbody>
            </table>
        </div>
        <div class="card-footer clearfix">
            <span class="text-muted">Total: ${services ? services.length : 0} services</span>
        </div>
    </div>
    `,
    extraScripts: `
    <script>
        // EDIT HERE: Simple table search
        document.getElementById('serviceSearch').addEventListener('keyup', function() {
            var searchText = this.value.toLowerCase();
            var rows = document.querySelectorAll('#servicesTable tbody tr');
            rows.forEach(function(row) {
                var text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchText) ? '' : 'none';
            });
        });
    </script>
    `
}) %>
